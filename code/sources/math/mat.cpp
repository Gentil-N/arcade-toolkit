#include "../../include/atk_math.h"

#define MTH_DEF_MAT2(type, t)                                                                                                  \
       MthMat2##t::MthMat2##t()                                                                                                \
       {                                                                                                                       \
              m[0][0] = 0;                                                                                                     \
              m[0][1] = 0;                                                                                                     \
              m[1][0] = 0;                                                                                                     \
              m[1][1] = 0;                                                                                                     \
       }                                                                                                                       \
       MthMat2##t::MthMat2##t(type m00, type m01, type m10, type m11)                                                          \
       {                                                                                                                       \
              m[0][0] = m00;                                                                                                   \
              m[0][1] = m01;                                                                                                   \
              m[1][0] = m10;                                                                                                   \
              m[1][1] = m11;                                                                                                   \
       }                                                                                                                       \
       MthMat2##t::MthMat2##t(const MthMat2##t &mat)                                                                           \
       {                                                                                                                       \
              m[0][0] = mat.m[0][0];                                                                                           \
              m[0][1] = mat.m[0][1];                                                                                           \
              m[1][0] = mat.m[1][0];                                                                                           \
              m[1][1] = mat.m[1][1];                                                                                           \
       }                                                                                                                       \
       bool MthMat2##t::operator==(const MthMat2##t &mat) const                                                                \
       {                                                                                                                       \
              return m[0][0] == mat.m[0][0] && m[0][1] == mat.m[0][1] && m[1][0] == mat.m[1][0] && m[1][1] == mat.m[1][1];     \
       }                                                                                                                       \
       bool MthMat2##t::operator!=(const MthMat2##t &mat) const                                                                \
       {                                                                                                                       \
              return m[0][0] != mat.m[0][0] || m[0][1] != mat.m[0][1] || m[1][0] != mat.m[1][0] || m[1][1] != mat.m[1][1];     \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::operator+=(const MthMat2##t &mat)                                                               \
       {                                                                                                                       \
              m[0][0] += mat.m[0][0];                                                                                          \
              m[0][1] += mat.m[0][1];                                                                                          \
              m[1][0] += mat.m[1][0];                                                                                          \
              m[1][1] += mat.m[1][1];                                                                                          \
              return *this;                                                                                                    \
       }                                                                                                                       \
       MthMat2##t MthMat2##t::operator+(const MthMat2##t &mat) const                                                           \
       {                                                                                                                       \
              return MthMat2##t(m[0][0] + mat.m[0][0], m[0][1] + mat.m[0][1], m[1][0] + mat.m[1][0], m[1][1] + mat.m[1][1]);   \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::operator-=(const MthMat2##t &mat)                                                               \
       {                                                                                                                       \
              m[0][0] -= mat.m[0][0];                                                                                          \
              m[0][1] -= mat.m[0][1];                                                                                          \
              m[1][0] -= mat.m[1][0];                                                                                          \
              m[1][1] -= mat.m[1][1];                                                                                          \
              return *this;                                                                                                    \
       }                                                                                                                       \
       MthMat2##t MthMat2##t::operator-(const MthMat2##t &mat)                                                                 \
       {                                                                                                                       \
              return MthMat2##t(m[0][0] - mat.m[0][0], m[0][1] - mat.m[0][1], m[1][0] - mat.m[1][0], m[1][1] - mat.m[1][1]);   \
       }                                                                                                                       \
       MthMat2##t MthMat2##t::operator-() const                                                                                \
       {                                                                                                                       \
              return MthMat2##t(-m[0][0], -m[0][1], -m[1][0], -m[1][1]);                                                       \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::operator*=(const MthMat2##t &mat)                                                               \
       {                                                                                                                       \
              type m00 = m[0][0] * mat.m[0][0] + m[1][0] * mat.m[0][1];                                                        \
              type m01 = m[0][1] * mat.m[0][0] + m[1][1] * mat.m[0][1];                                                        \
              type m10 = m[0][0] * mat.m[1][0] + m[1][0] * mat.m[1][1];                                                        \
              type m11 = m[0][1] * mat.m[1][0] + m[1][1] * mat.m[1][1];                                                        \
              m[0][0] = m00;                                                                                                   \
              m[0][1] = m01;                                                                                                   \
              m[1][0] = m10;                                                                                                   \
              m[1][1] = m11;                                                                                                   \
              return *this;                                                                                                    \
       }                                                                                                                       \
       MthMat2##t MthMat2##t::operator*(const MthMat2##t &mat)                                                                 \
       {                                                                                                                       \
              return MthMat2##t(m[0][0] * mat.m[0][0] + m[1][0] * mat.m[0][1], m[0][1] * mat.m[0][0] + m[1][1] * mat.m[0][1],  \
                                m[0][0] * mat.m[1][0] + m[1][0] * mat.m[1][1], m[0][1] * mat.m[1][0] + m[1][1] * mat.m[1][1]); \
       }                                                                                                                       \
       MthVec2##t MthMat2##t::operator*(const MthVec2##t &vec) const                                                           \
       {                                                                                                                       \
              return MthVec2##t(m[0][0] * vec.x + m[1][0] * vec.y,                                                             \
                                m[0][1] * vec.x + m[1][1] * vec.y);                                                            \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::operator*=(type factor)                                                                         \
       {                                                                                                                       \
              m[0][0] *= factor;                                                                                               \
              m[0][1] *= factor;                                                                                               \
              m[1][0] *= factor;                                                                                               \
              m[1][1] *= factor;                                                                                               \
              return *this;                                                                                                    \
       }                                                                                                                       \
       MthMat2##t MthMat2##t::operator*(type factor) const                                                                     \
       {                                                                                                                       \
              return MthMat2##t(m[0][0] * factor, m[0][1] * factor, m[1][0] * factor, m[1][1] * factor);                       \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::identity()                                                                                      \
       {                                                                                                                       \
              m[0][0] = 1;                                                                                                     \
              m[0][1] = 0;                                                                                                     \
              m[1][0] = 0;                                                                                                     \
              m[1][1] = 1;                                                                                                     \
              return *this;                                                                                                    \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::transpose()                                                                                     \
       {                                                                                                                       \
              type buf10 = m[1][0];                                                                                            \
              m[1][0] = m[0][1];                                                                                               \
              m[0][1] = buf10;                                                                                                 \
              return *this;                                                                                                    \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::scale(type x, type y)                                                                           \
       {                                                                                                                       \
              m[0][0] * x;                                                                                                     \
              m[0][1] * x;                                                                                                     \
              m[1][0] * y;                                                                                                     \
              m[1][1] * y;                                                                                                     \
              return *this;                                                                                                    \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::scale(const MthVec2##t &vec)                                                                    \
       {                                                                                                                       \
              return scale(vec.x, vec.y);                                                                                      \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::rotFst(type a)                                                                                  \
       {                                                                                                                       \
              type c = (type)cosf(a);                                                                                          \
              type s = (type)sinf(a);                                                                                          \
              type m00 = m[0][0] * c + m[1][0] * s;                                                                            \
              type m01 = m[0][1] * c + m[1][1] * s;                                                                            \
              type m10 = m[0][0] * -s + m[1][0] * c;                                                                           \
              type m11 = m[0][1] * -s + m[1][1] * c;                                                                           \
              m[0][0] = m00;                                                                                                   \
              m[0][1] = m01;                                                                                                   \
              m[1][0] = m10;                                                                                                   \
              m[1][1] = m11;                                                                                                   \
              return *this;                                                                                                    \
       }                                                                                                                       \
       MthMat2##t &MthMat2##t::rotSec(type a)                                                                                  \
       {                                                                                                                       \
              type c = (type)cosf(a);                                                                                          \
              type s = (type)sinf(a);                                                                                          \
              type m00 = m[0][0] * c + m[0][1] * -s;                                                                           \
              type m01 = m[0][0] * s + m[0][1] * c;                                                                            \
              type m10 = m[1][0] * c + m[1][1] * -s;                                                                           \
              type m11 = m[1][0] * s + m[1][1] * c;                                                                            \
              m[0][0] = m00;                                                                                                   \
              m[0][1] = m01;                                                                                                   \
              m[1][0] = m10;                                                                                                   \
              m[1][1] = m11;                                                                                                   \
              return *this;                                                                                                    \
       }
#define MTH_DEF_MAT3(type, t)                                                                                                                                                                                                                                \
       MthMat3##t::MthMat3##t()                                                                                                                                                                                                                              \
       {                                                                                                                                                                                                                                                     \
              m[0][0] = 0;                                                                                                                                                                                                                                   \
              m[0][1] = 0;                                                                                                                                                                                                                                   \
              m[0][2] = 0;                                                                                                                                                                                                                                   \
              m[1][0] = 0;                                                                                                                                                                                                                                   \
              m[1][1] = 0;                                                                                                                                                                                                                                   \
              m[1][2] = 0;                                                                                                                                                                                                                                   \
              m[2][0] = 0;                                                                                                                                                                                                                                   \
              m[2][1] = 0;                                                                                                                                                                                                                                   \
              m[2][2] = 0;                                                                                                                                                                                                                                   \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t::MthMat3##t(type m00, type m01, type m02, type m10, type m11, type m12, type m20, type m21, type m22)                                                                                                                                      \
       {                                                                                                                                                                                                                                                     \
              m[0][0] = m00;                                                                                                                                                                                                                                 \
              m[0][1] = m01;                                                                                                                                                                                                                                 \
              m[0][2] = m02;                                                                                                                                                                                                                                 \
              m[1][0] = m10;                                                                                                                                                                                                                                 \
              m[1][1] = m11;                                                                                                                                                                                                                                 \
              m[1][2] = m12;                                                                                                                                                                                                                                 \
              m[2][0] = m20;                                                                                                                                                                                                                                 \
              m[2][1] = m21;                                                                                                                                                                                                                                 \
              m[2][2] = m22;                                                                                                                                                                                                                                 \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t::MthMat3##t(const MthMat3##t &mat)                                                                                                                                                                                                         \
       {                                                                                                                                                                                                                                                     \
              m[0][0] = mat.m[0][0];                                                                                                                                                                                                                         \
              m[0][1] = mat.m[0][1];                                                                                                                                                                                                                         \
              m[0][2] = mat.m[0][2];                                                                                                                                                                                                                         \
              m[1][0] = mat.m[1][0];                                                                                                                                                                                                                         \
              m[1][1] = mat.m[1][1];                                                                                                                                                                                                                         \
              m[1][2] = mat.m[1][2];                                                                                                                                                                                                                         \
              m[2][0] = mat.m[2][0];                                                                                                                                                                                                                         \
              m[2][1] = mat.m[2][1];                                                                                                                                                                                                                         \
              m[2][2] = mat.m[2][2];                                                                                                                                                                                                                         \
       }\
       bool MthMat3##t::operator==(const MthMat3##t &mat) const                                                                                                                                                                                              \
       {                                                                                                                                                                                                                                                     \
              return m[0][0] == mat.m[0][0] && m[0][1] == mat.m[0][1] && m[1][0] == mat.m[1][0] && m[1][1] == mat.m[1][1] && m[0][2] == mat.m[0][2] && m[1][2] == mat.m[1][2] && m[2][0] == mat.m[2][0] && m[2][1] == mat.m[2][1] && m[2][2] == mat.m[2][2]; \
       }                                                                                                                                                                                                                                                     \
       bool MthMat3##t::operator!=(const MthMat3##t &mat) const                                                                                                                                                                                              \
       {                                                                                                                                                                                                                                                     \
              return m[0][0] != mat.m[0][0] || m[0][1] != mat.m[0][1] || m[1][0] != mat.m[1][0] || m[1][1] != mat.m[1][1] || m[0][2] != mat.m[0][2] || m[1][2] != mat.m[1][2] || m[2][0] != mat.m[2][0] || m[2][1] != mat.m[2][1] || m[2][2] != mat.m[2][2]; \
       }\
       MthMat3##t &MthMat3##t::operator+=(const MthMat3##t &mat)                                                                                                                                                                                             \
       {                                                                                                                                                                                                                                                     \
              m[0][0] += mat.m[0][0];                                                                                                                                                                                                                        \
              m[0][1] += mat.m[0][1];                                                                                                                                                                                                                        \
              m[0][2] += mat.m[0][2];                                                                                                                                                                                                                        \
              m[1][0] += mat.m[1][0];                                                                                                                                                                                                                        \
              m[1][1] += mat.m[1][1];                                                                                                                                                                                                                        \
              m[1][2] += mat.m[1][2];                                                                                                                                                                                                                        \
              m[2][0] += mat.m[2][0];                                                                                                                                                                                                                        \
              m[2][1] += mat.m[2][1];                                                                                                                                                                                                                        \
              m[2][2] += mat.m[2][2];                                                                                                                                                                                                                        \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t MthMat3##t::operator+(const MthMat3##t &mat) const                                                                                                                                                                                         \
       {                                                                                                                                                                                                                                                     \
              return MthMat3##t(m[0][0] + mat.m[0][0], m[0][1] + mat.m[0][1], m[0][2] + mat.m[0][2],                                                                                                                                                         \
                                m[1][0] + mat.m[1][0], m[1][1] + mat.m[1][1], m[1][2] + mat.m[1][2],                                                                                                                                                         \
                                m[2][0] + mat.m[2][0], m[2][1] + mat.m[2][1], m[2][2] + mat.m[2][2]);                                                                                                                                                        \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::operator-=(const MthMat3##t &mat)                                                                                                                                                                                             \
       {                                                                                                                                                                                                                                                     \
              m[0][0] -= mat.m[0][0];                                                                                                                                                                                                                        \
              m[0][1] -= mat.m[0][1];                                                                                                                                                                                                                        \
              m[0][2] -= mat.m[0][2];                                                                                                                                                                                                                        \
              m[1][0] -= mat.m[1][0];                                                                                                                                                                                                                        \
              m[1][1] -= mat.m[1][1];                                                                                                                                                                                                                        \
              m[1][2] -= mat.m[1][2];                                                                                                                                                                                                                        \
              m[2][0] -= mat.m[2][0];                                                                                                                                                                                                                        \
              m[2][1] -= mat.m[2][1];                                                                                                                                                                                                                        \
              m[2][2] -= mat.m[2][2];                                                                                                                                                                                                                        \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t MthMat3##t::operator-(const MthMat3##t &mat)                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                     \
              return MthMat3##t(m[0][0] - mat.m[0][0], m[0][1] - mat.m[0][1], m[0][2] - mat.m[0][2],                                                                                                                                                         \
                                m[1][0] - mat.m[1][0], m[1][1] - mat.m[1][1], m[1][2] - mat.m[1][2],                                                                                                                                                         \
                                m[2][0] - mat.m[2][0], m[2][1] - mat.m[2][1], m[2][2] - mat.m[2][2]);                                                                                                                                                        \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t MthMat3##t::operator-() const                                                                                                                                                                                                              \
       {                                                                                                                                                                                                                                                     \
              return MthMat3##t(-m[0][0], -m[0][1], -m[0][2],                                                                                                                                                                                                \
                                -m[1][0], -m[1][1], -m[1][2],                                                                                                                                                                                                \
                                -m[2][0], -m[2][1], -m[2][2]);                                                                                                                                                                                               \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::operator*=(const MthMat3##t &mat)                                                                                                                                                                                             \
       {                                                                                                                                                                                                                                                     \
              type m00 = m[0][0] * mat.m[0][0] + m[1][0] * mat.m[0][1] + m[2][0] * mat.m[0][2];                                                                                                                                                              \
              type m01 = m[0][1] * mat.m[0][0] + m[1][1] * mat.m[0][1] + m[2][1] * mat.m[0][2];                                                                                                                                                              \
              type m02 = m[0][2] * mat.m[0][0] + m[1][2] * mat.m[0][1] + m[2][2] * mat.m[0][2];                                                                                                                                                              \
              type m10 = m[0][0] * mat.m[1][0] + m[1][0] * mat.m[1][1] + m[2][0] * mat.m[1][2];                                                                                                                                                              \
              type m11 = m[0][1] * mat.m[1][0] + m[1][1] * mat.m[1][1] + m[2][1] * mat.m[1][2];                                                                                                                                                              \
              type m12 = m[0][2] * mat.m[1][0] + m[1][2] * mat.m[1][1] + m[2][2] * mat.m[1][2];                                                                                                                                                              \
              type m20 = m[0][0] * mat.m[2][0] + m[1][0] * mat.m[2][1] + m[2][0] * mat.m[2][2];                                                                                                                                                              \
              type m21 = m[0][1] * mat.m[2][0] + m[1][1] * mat.m[2][1] + m[2][1] * mat.m[2][2];                                                                                                                                                              \
              type m22 = m[0][2] * mat.m[2][0] + m[1][2] * mat.m[2][1] + m[2][2] * mat.m[2][2];                                                                                                                                                              \
              m[0][0] = m00;                                                                                                                                                                                                                                 \
              m[0][1] = m01;                                                                                                                                                                                                                                 \
              m[0][2] = m02;                                                                                                                                                                                                                                 \
              m[1][0] = m10;                                                                                                                                                                                                                                 \
              m[1][1] = m11;                                                                                                                                                                                                                                 \
              m[1][2] = m12;                                                                                                                                                                                                                                 \
              m[2][0] = m20;                                                                                                                                                                                                                                 \
              m[2][1] = m21;                                                                                                                                                                                                                                 \
              m[2][2] = m22;                                                                                                                                                                                                                                 \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t MthMat3##t::operator*(const MthMat3##t &mat)                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                     \
              return MthMat3##t(m[0][0] * mat.m[0][0] + m[1][0] * mat.m[0][1] + m[2][0] * mat.m[0][2],                                                                                                                                                       \
                                m[0][1] * mat.m[0][0] + m[1][1] * mat.m[0][1] + m[2][1] * mat.m[0][2],                                                                                                                                                       \
                                m[0][2] * mat.m[0][0] + m[1][2] * mat.m[0][1] + m[2][2] * mat.m[0][2],                                                                                                                                                       \
                                m[0][0] * mat.m[1][0] + m[1][0] * mat.m[1][1] + m[2][0] * mat.m[1][2],                                                                                                                                                       \
                                m[0][1] * mat.m[1][0] + m[1][1] * mat.m[1][1] + m[2][1] * mat.m[1][2],                                                                                                                                                       \
                                m[0][2] * mat.m[1][0] + m[1][2] * mat.m[1][1] + m[2][2] * mat.m[1][2],                                                                                                                                                       \
                                m[0][0] * mat.m[2][0] + m[1][0] * mat.m[2][1] + m[2][0] * mat.m[2][2],                                                                                                                                                       \
                                m[0][1] * mat.m[2][0] + m[1][1] * mat.m[2][1] + m[2][1] * mat.m[2][2],                                                                                                                                                       \
                                m[0][2] * mat.m[2][0] + m[1][2] * mat.m[2][1] + m[2][2] * mat.m[2][2]);                                                                                                                                                      \
       }                                                                                                                                                                                                                                                     \
       MthVec3##t MthMat3##t::operator*(const MthVec3##t &vec) const                                                                                                                                                                                         \
       {                                                                                                                                                                                                                                                     \
              return MthVec3##t(m[0][0] * vec.x + m[1][0] * vec.y + m[2][0] * vec.z,                                                                                                                                                                         \
                                m[0][1] * vec.x + m[1][1] * vec.y + m[2][1] * vec.z,                                                                                                                                                                         \
                                m[0][2] * vec.x + m[1][2] * vec.y + m[2][2] * vec.z);                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::operator*=(type factor)                                                                                                                                                                                                       \
       {                                                                                                                                                                                                                                                     \
              m[0][0] *= factor;                                                                                                                                                                                                                             \
              m[0][1] *= factor;                                                                                                                                                                                                                             \
              m[0][2] *= factor;                                                                                                                                                                                                                             \
              m[1][0] *= factor;                                                                                                                                                                                                                             \
              m[1][1] *= factor;                                                                                                                                                                                                                             \
              m[1][2] *= factor;                                                                                                                                                                                                                             \
              m[2][0] *= factor;                                                                                                                                                                                                                             \
              m[2][1] *= factor;                                                                                                                                                                                                                             \
              m[2][2] *= factor;                                                                                                                                                                                                                             \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t MthMat3##t::operator*(type factor) const                                                                                                                                                                                                   \
       {                                                                                                                                                                                                                                                     \
              return MthMat3##t(m[0][0] * factor,                                                                                                                                                                                                            \
                                m[0][1] * factor,                                                                                                                                                                                                            \
                                m[0][2] * factor,                                                                                                                                                                                                            \
                                m[1][0] * factor,                                                                                                                                                                                                            \
                                m[1][1] * factor,                                                                                                                                                                                                            \
                                m[1][2] * factor,                                                                                                                                                                                                            \
                                m[2][0] * factor,                                                                                                                                                                                                            \
                                m[2][1] * factor,                                                                                                                                                                                                            \
                                m[2][2] * factor);                                                                                                                                                                                                           \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::identity()                                                                                                                                                                                                                    \
       {                                                                                                                                                                                                                                                     \
              m[0][0] = 1;                                                                                                                                                                                                                                   \
              m[0][1] = 0;                                                                                                                                                                                                                                   \
              m[0][2] = 0;                                                                                                                                                                                                                                   \
              m[1][0] = 0;                                                                                                                                                                                                                                   \
              m[1][1] = 1;                                                                                                                                                                                                                                   \
              m[1][2] = 0;                                                                                                                                                                                                                                   \
              m[2][0] = 0;                                                                                                                                                                                                                                   \
              m[2][1] = 0;                                                                                                                                                                                                                                   \
              m[2][2] = 1;                                                                                                                                                                                                                                   \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::transpose()                                                                                                                                                                                                                   \
       {                                                                                                                                                                                                                                                     \
              type buf10 = m[1][0];                                                                                                                                                                                                                          \
              m[1][0] = m[0][1];                                                                                                                                                                                                                             \
              m[0][1] = buf10;                                                                                                                                                                                                                               \
              type buf20 = m[2][0];                                                                                                                                                                                                                          \
              m[2][0] = m[0][2];                                                                                                                                                                                                                             \
              m[0][2] = buf20;                                                                                                                                                                                                                               \
              type buf21 = m[2][1];                                                                                                                                                                                                                          \
              m[2][1] = m[1][2];                                                                                                                                                                                                                             \
              m[1][2] = buf21;                                                                                                                                                                                                                               \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::scale(type x, type y, type z)                                                                                                                                                                                                 \
       {                                                                                                                                                                                                                                                     \
              m[0][0] *= x;                                                                                                                                                                                                                                  \
              m[0][1] *= x;                                                                                                                                                                                                                                  \
              m[0][2] *= x;                                                                                                                                                                                                                                  \
              m[1][0] *= y;                                                                                                                                                                                                                                  \
              m[1][1] *= y;                                                                                                                                                                                                                                  \
              m[1][2] *= y;                                                                                                                                                                                                                                  \
              m[2][0] *= z;                                                                                                                                                                                                                                  \
              m[2][1] *= z;                                                                                                                                                                                                                                  \
              m[2][2] *= z;                                                                                                                                                                                                                                  \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::scale(const MthVec3##t &vec)                                                                                                                                                                                                  \
       {                                                                                                                                                                                                                                                     \
              return scale(vec.x, vec.y, vec.z);                                                                                                                                                                                                             \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::rotXFst(type a)                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                     \
              type c = (type)cosf(a);                                                                                                                                                                                                                        \
              type s = (type)sinf(a);                                                                                                                                                                                                                        \
              type m10 = m[1][0] * c + m[2][0] * s;                                                                                                                                                                                                          \
              type m11 = m[1][1] * c + m[2][1] * s;                                                                                                                                                                                                          \
              type m12 = m[1][2] * c + m[2][2] * s;                                                                                                                                                                                                          \
              type m20 = m[1][0] * -s + m[2][0] * c;                                                                                                                                                                                                         \
              type m21 = m[1][1] * -s + m[2][1] * c;                                                                                                                                                                                                         \
              type m22 = m[1][2] * -s + m[2][2] * c;                                                                                                                                                                                                         \
              m[1][0] = m10;                                                                                                                                                                                                                                 \
              m[1][1] = m11;                                                                                                                                                                                                                                 \
              m[1][2] = m12;                                                                                                                                                                                                                                 \
              m[2][0] = m20;                                                                                                                                                                                                                                 \
              m[2][1] = m21;                                                                                                                                                                                                                                 \
              m[2][2] = m22;                                                                                                                                                                                                                                 \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::rotXSec(type a)                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                     \
              type c = (type)cosf(a);                                                                                                                                                                                                                        \
              type s = (type)sinf(a);                                                                                                                                                                                                                        \
              type m01 = m[0][1] * c + m[0][2] * -s;                                                                                                                                                                                                         \
              type m02 = m[0][1] * s + m[0][2] * c;                                                                                                                                                                                                          \
              type m11 = m[1][1] * c + m[1][2] * -s;                                                                                                                                                                                                         \
              type m12 = m[1][1] * s + m[1][2] * c;                                                                                                                                                                                                          \
              type m21 = m[2][1] * c + m[2][2] * -s;                                                                                                                                                                                                         \
              type m22 = m[2][1] * s + m[2][2] * c;                                                                                                                                                                                                          \
              m[0][1] = m01;                                                                                                                                                                                                                                 \
              m[0][2] = m02;                                                                                                                                                                                                                                 \
              m[1][1] = m11;                                                                                                                                                                                                                                 \
              m[1][2] = m12;                                                                                                                                                                                                                                 \
              m[2][1] = m21;                                                                                                                                                                                                                                 \
              m[2][2] = m22;                                                                                                                                                                                                                                 \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::rotYFst(type a)                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                     \
              type c = (type)cosf(a);                                                                                                                                                                                                                        \
              type s = (type)sinf(a);                                                                                                                                                                                                                        \
              type m00 = m[0][0] * c + m[2][0] * -s;                                                                                                                                                                                                         \
              type m01 = m[0][1] * c + m[2][1] * -s;                                                                                                                                                                                                         \
              type m02 = m[0][2] * c + m[2][2] * -s;                                                                                                                                                                                                         \
              type m20 = m[0][0] * s + m[2][0] * c;                                                                                                                                                                                                          \
              type m21 = m[0][1] * s + m[2][1] * c;                                                                                                                                                                                                          \
              type m22 = m[0][2] * s + m[2][2] * c;                                                                                                                                                                                                          \
              m[0][0] = m00;                                                                                                                                                                                                                                 \
              m[0][1] = m01;                                                                                                                                                                                                                                 \
              m[0][2] = m02;                                                                                                                                                                                                                                 \
              m[2][0] = m20;                                                                                                                                                                                                                                 \
              m[2][1] = m21;                                                                                                                                                                                                                                 \
              m[2][2] = m22;                                                                                                                                                                                                                                 \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::rotYSec(type a)                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                     \
              type c = (type)cosf(a);                                                                                                                                                                                                                        \
              type s = (type)sinf(a);                                                                                                                                                                                                                        \
              type m00 = m[0][0] * c + m[0][2] * s;                                                                                                                                                                                                          \
              type m02 = m[0][0] * -s + m[0][2] * c;                                                                                                                                                                                                         \
              type m10 = m[1][0] * c + m[1][2] * s;                                                                                                                                                                                                          \
              type m12 = m[1][0] * -s + m[1][2] * c;                                                                                                                                                                                                         \
              type m20 = m[2][0] * c + m[2][2] * s;                                                                                                                                                                                                          \
              type m22 = m[2][0] * -s + m[2][2] * c;                                                                                                                                                                                                         \
              m[0][0] = m00;                                                                                                                                                                                                                                 \
              m[0][2] = m02;                                                                                                                                                                                                                                 \
              m[1][0] = m10;                                                                                                                                                                                                                                 \
              m[1][2] = m12;                                                                                                                                                                                                                                 \
              m[2][0] = m20;                                                                                                                                                                                                                                 \
              m[2][2] = m22;                                                                                                                                                                                                                                 \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::rotZFst(type a)                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                     \
              type c = (type)cosf(a);                                                                                                                                                                                                                        \
              type s = (type)sinf(a);                                                                                                                                                                                                                        \
              type m00 = m[0][0] * c + m[1][0] * s;                                                                                                                                                                                                          \
              type m01 = m[0][1] * c + m[1][1] * s;                                                                                                                                                                                                          \
              type m02 = m[0][2] * c + m[1][2] * s;                                                                                                                                                                                                          \
              type m10 = m[0][0] * -s + m[1][0] * c;                                                                                                                                                                                                         \
              type m11 = m[0][1] * -s + m[1][1] * c;                                                                                                                                                                                                         \
              type m12 = m[0][2] * -s + m[1][2] * c;                                                                                                                                                                                                         \
              m[0][0] = m00;                                                                                                                                                                                                                                 \
              m[0][1] = m01;                                                                                                                                                                                                                                 \
              m[0][2] = m02;                                                                                                                                                                                                                                 \
              m[1][0] = m10;                                                                                                                                                                                                                                 \
              m[1][1] = m11;                                                                                                                                                                                                                                 \
              m[1][2] = m12;                                                                                                                                                                                                                                 \
              return *this;                                                                                                                                                                                                                                  \
       }                                                                                                                                                                                                                                                     \
       MthMat3##t &MthMat3##t::rotZSec(type a)                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                     \
              type c = (type)cosf(a);                                                                                                                                                                                                                        \
              type s = (type)sinf(a);                                                                                                                                                                                                                        \
              type m00 = m[0][0] * c + m[0][1] * -s;                                                                                                                                                                                                         \
              type m01 = m[0][0] * s + m[0][1] * c;                                                                                                                                                                                                          \
              type m10 = m[1][0] * c + m[1][1] * -s;                                                                                                                                                                                                         \
              type m11 = m[1][0] * s + m[1][1] * c;                                                                                                                                                                                                          \
              type m20 = m[2][0] * c + m[2][1] * -s;                                                                                                                                                                                                         \
              type m21 = m[2][0] * s + m[2][1] * c;                                                                                                                                                                                                          \
              m[0][0] = m00;                                                                                                                                                                                                                                 \
              m[0][1] = m01;                                                                                                                                                                                                                                 \
              m[1][0] = m10;                                                                                                                                                                                                                                 \
              m[1][1] = m11;                                                                                                                                                                                                                                 \
              m[2][0] = m20;                                                                                                                                                                                                                                 \
              m[2][1] = m21;                                                                                                                                                                                                                                 \
              return *this;                                                                                                                                                                                                                                  \
       }

#define MTH_DEF_MAT4(type, t)                                                                                                                                                                                                                                                                                                                                                                                                                      \
       MthMat4##t::MthMat4##t()                                                                                                                                                                                                                                                                                                                                                                                                                    \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[0][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[0][2] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[0][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][2] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][2] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][2] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t::MthMat4##t(type m00, type m01, type m02, type m03,                                                                                                                                                                                                                                                                                                                                                                              \
                              type m10, type m11, type m12, type m13,                                                                                                                                                                                                                                                                                                                                                                              \
                              type m20, type m21, type m22, type m23,                                                                                                                                                                                                                                                                                                                                                                              \
                              type m30, type m31, type m32, type m33)                                                                                                                                                                                                                                                                                                                                                                              \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] = m00;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][1] = m01;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][2] = m02;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][3] = m03;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][0] = m10;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][1] = m11;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][2] = m12;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][3] = m13;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][0] = m20;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][1] = m21;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][2] = m22;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][3] = m23;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][0] = m30;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][1] = m31;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][2] = m32;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][3] = m33;                                                                                                                                                                                                                                                                                                                                                                                                                       \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t::MthMat4##t(const MthMat4##t &mat)                                                                                                                                                                                                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] = mat.m[0][0];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[0][1] = mat.m[0][1];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[0][2] = mat.m[0][2];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[0][3] = mat.m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[1][0] = mat.m[1][0];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[1][1] = mat.m[1][1];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[1][2] = mat.m[1][2];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[1][3] = mat.m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[2][0] = mat.m[2][0];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[2][1] = mat.m[2][1];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[2][2] = mat.m[2][2];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[2][3] = mat.m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[3][0] = mat.m[3][0];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[3][1] = mat.m[3][1];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[3][2] = mat.m[3][2];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[3][3] = mat.m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                               \
       }\
       bool MthMat4##t::operator==(const MthMat4##t &mat) const                                                                                                                                                                                                                                                                                                                                                                                    \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return m[0][0] == mat.m[0][0] && m[0][1] == mat.m[0][1] && m[1][0] == mat.m[1][0] && m[1][1] == mat.m[1][1] && m[0][2] == mat.m[0][2] && m[1][2] == mat.m[1][2] && m[2][0] == mat.m[2][0] && m[2][1] == mat.m[2][1] && m[2][2] == mat.m[2][2] && m[0][3] == mat.m[0][3] && m[1][3] == mat.m[1][3] && m[2][3] == mat.m[2][3] && m[3][0] == mat.m[3][0] && m[3][1] == mat.m[3][1] && m[3][2] == mat.m[3][2] && m[3][3] == mat.m[3][3]; \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       bool MthMat4##t::operator!=(const MthMat4##t &mat) const                                                                                                                                                                                                                                                                                                                                                                                    \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return m[0][0] != mat.m[0][0] || m[0][1] != mat.m[0][1] || m[1][0] != mat.m[1][0] || m[1][1] != mat.m[1][1] || m[0][2] != mat.m[0][2] || m[1][2] != mat.m[1][2] || m[2][0] != mat.m[2][0] || m[2][1] != mat.m[2][1] || m[2][2] != mat.m[2][2] || m[0][3] != mat.m[0][3] || m[1][3] != mat.m[1][3] || m[2][3] != mat.m[2][3] || m[3][0] != mat.m[3][0] || m[3][1] != mat.m[3][1] || m[3][2] != mat.m[3][2] || m[3][3] != mat.m[3][3]; \
       }\
       MthMat4##t &MthMat4##t::operator+=(const MthMat4##t &mat)                                                                                                                                                                                                                                                                                                                                                                                   \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] += mat.m[0][0];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[0][1] += mat.m[0][1];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[0][2] += mat.m[0][2];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[0][3] += mat.m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[1][0] += mat.m[1][0];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[1][1] += mat.m[1][1];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[1][2] += mat.m[1][2];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[1][3] += mat.m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[2][0] += mat.m[2][0];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[2][1] += mat.m[2][1];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[2][2] += mat.m[2][2];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[2][3] += mat.m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[3][0] += mat.m[3][0];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[3][1] += mat.m[3][1];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[3][2] += mat.m[3][2];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[3][3] += mat.m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                              \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t MthMat4##t::operator+(const MthMat4##t &mat) const                                                                                                                                                                                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return MthMat4##t(m[0][0] + mat.m[0][0],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[0][1] + mat.m[0][1],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[0][2] + mat.m[0][2],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[0][3] + mat.m[0][3],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[1][0] + mat.m[1][0],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[1][1] + mat.m[1][1],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[1][2] + mat.m[1][2],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[1][3] + mat.m[1][3],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[2][0] + mat.m[2][0],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[2][1] + mat.m[2][1],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[2][2] + mat.m[2][2],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[2][3] + mat.m[2][3],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[3][0] + mat.m[3][0],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[3][1] + mat.m[3][1],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[3][2] + mat.m[3][2],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[3][3] + mat.m[3][3]);                                                                                                                                                                                                                                                                                                                                                                                            \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::operator-=(const MthMat4##t &mat)                                                                                                                                                                                                                                                                                                                                                                                   \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] += mat.m[0][0];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[0][1] += mat.m[0][1];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[0][2] += mat.m[0][2];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[0][3] += mat.m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[1][0] += mat.m[1][0];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[1][1] += mat.m[1][1];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[1][2] += mat.m[1][2];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[1][3] += mat.m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[2][0] += mat.m[2][0];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[2][1] += mat.m[2][1];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[2][2] += mat.m[2][2];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[2][3] += mat.m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[3][0] += mat.m[3][0];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[3][1] += mat.m[3][1];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[3][2] += mat.m[3][2];                                                                                                                                                                                                                                                                                                                                                                                                              \
              m[3][3] += mat.m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                              \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t MthMat4##t::operator-(const MthMat4##t &mat)                                                                                                                                                                                                                                                                                                                                                                                     \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return MthMat4##t(m[0][0] - mat.m[0][0],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[0][1] - mat.m[0][1],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[0][2] - mat.m[0][2],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[0][3] - mat.m[0][3],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[1][0] - mat.m[1][0],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[1][1] - mat.m[1][1],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[1][2] - mat.m[1][2],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[1][3] - mat.m[1][3],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[2][0] - mat.m[2][0],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[2][1] - mat.m[2][1],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[2][2] - mat.m[2][2],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[2][3] - mat.m[2][3],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[3][0] - mat.m[3][0],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[3][1] - mat.m[3][1],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[3][2] - mat.m[3][2],                                                                                                                                                                                                                                                                                                                                                                                             \
                                m[3][3] - mat.m[3][3]);                                                                                                                                                                                                                                                                                                                                                                                            \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t MthMat4##t::operator-() const                                                                                                                                                                                                                                                                                                                                                                                                    \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return MthMat4##t(-m[0][0], -m[0][1], -m[0][2], -m[0][3],                                                                                                                                                                                                                                                                                                                                                                            \
                                -m[1][0], -m[1][1], -m[1][2], -m[1][3],                                                                                                                                                                                                                                                                                                                                                                            \
                                -m[2][0], -m[2][1], -m[2][2], -m[2][3],                                                                                                                                                                                                                                                                                                                                                                            \
                                -m[3][0], -m[3][1], -m[3][2], -m[3][3]);                                                                                                                                                                                                                                                                                                                                                                           \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::operator*=(const MthMat4##t &mat)                                                                                                                                                                                                                                                                                                                                                                                   \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              type m00 = m[0][0] * mat.m[0][0] + m[1][0] * mat.m[0][1] + m[2][0] * mat.m[0][2] + m[3][0] * mat.m[0][3];                                                                                                                                                                                                                                                                                                                            \
              type m01 = m[0][1] * mat.m[0][0] + m[1][1] * mat.m[0][1] + m[2][1] * mat.m[0][2] + m[3][1] * mat.m[0][3];                                                                                                                                                                                                                                                                                                                            \
              type m02 = m[0][2] * mat.m[0][0] + m[1][2] * mat.m[0][1] + m[2][2] * mat.m[0][2] + m[3][2] * mat.m[0][3];                                                                                                                                                                                                                                                                                                                            \
              type m03 = m[0][3] * mat.m[0][0] + m[1][3] * mat.m[0][1] + m[2][3] * mat.m[0][2] + m[3][3] * mat.m[0][3];                                                                                                                                                                                                                                                                                                                            \
              type m10 = m[0][0] * mat.m[1][0] + m[1][0] * mat.m[1][1] + m[2][0] * mat.m[1][2] + m[3][0] * mat.m[1][3];                                                                                                                                                                                                                                                                                                                            \
              type m11 = m[0][1] * mat.m[1][0] + m[1][1] * mat.m[1][1] + m[2][1] * mat.m[1][2] + m[3][1] * mat.m[1][3];                                                                                                                                                                                                                                                                                                                            \
              type m12 = m[0][2] * mat.m[1][0] + m[1][2] * mat.m[1][1] + m[2][2] * mat.m[1][2] + m[3][2] * mat.m[1][3];                                                                                                                                                                                                                                                                                                                            \
              type m13 = m[0][3] * mat.m[1][0] + m[1][3] * mat.m[1][1] + m[2][3] * mat.m[1][2] + m[3][3] * mat.m[1][3];                                                                                                                                                                                                                                                                                                                            \
              type m20 = m[0][0] * mat.m[2][0] + m[1][0] * mat.m[2][1] + m[2][0] * mat.m[2][2] + m[3][0] * mat.m[2][3];                                                                                                                                                                                                                                                                                                                            \
              type m21 = m[0][1] * mat.m[2][0] + m[1][1] * mat.m[2][1] + m[2][1] * mat.m[2][2] + m[3][1] * mat.m[2][3];                                                                                                                                                                                                                                                                                                                            \
              type m22 = m[0][2] * mat.m[2][0] + m[1][2] * mat.m[2][1] + m[2][2] * mat.m[2][2] + m[3][2] * mat.m[2][3];                                                                                                                                                                                                                                                                                                                            \
              type m23 = m[0][3] * mat.m[2][0] + m[1][3] * mat.m[2][1] + m[2][3] * mat.m[2][2] + m[3][3] * mat.m[2][3];                                                                                                                                                                                                                                                                                                                            \
              type m30 = m[0][0] * mat.m[3][0] + m[1][0] * mat.m[3][1] + m[2][0] * mat.m[3][2] + m[3][0] * mat.m[3][3];                                                                                                                                                                                                                                                                                                                            \
              type m31 = m[0][1] * mat.m[3][0] + m[1][1] * mat.m[3][1] + m[2][1] * mat.m[3][2] + m[3][1] * mat.m[3][3];                                                                                                                                                                                                                                                                                                                            \
              type m32 = m[0][2] * mat.m[3][0] + m[1][2] * mat.m[3][1] + m[2][2] * mat.m[3][2] + m[3][2] * mat.m[3][3];                                                                                                                                                                                                                                                                                                                            \
              type m33 = m[0][3] * mat.m[3][0] + m[1][3] * mat.m[3][1] + m[2][3] * mat.m[3][2] + m[3][3] * mat.m[3][3];                                                                                                                                                                                                                                                                                                                            \
              m[0][0] = m00;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][0] = m01;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][0] = m02;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][0] = m03;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][0] = m10;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][1] = m11;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][2] = m12;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][3] = m13;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][0] = m20;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][1] = m21;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][2] = m22;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][3] = m23;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][0] = m30;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][1] = m31;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][2] = m32;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][3] = m33;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t MthMat4##t::operator*(const MthMat4##t &mat)                                                                                                                                                                                                                                                                                                                                                                                     \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return MthMat4##t(m[0][0] * mat.m[0][0] + m[1][0] * mat.m[0][1] + m[2][0] * mat.m[0][2] + m[3][0] * mat.m[0][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][1] * mat.m[0][0] + m[1][1] * mat.m[0][1] + m[2][1] * mat.m[0][2] + m[3][1] * mat.m[0][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][2] * mat.m[0][0] + m[1][2] * mat.m[0][1] + m[2][2] * mat.m[0][2] + m[3][2] * mat.m[0][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][3] * mat.m[0][0] + m[1][3] * mat.m[0][1] + m[2][3] * mat.m[0][2] + m[3][3] * mat.m[0][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][0] * mat.m[1][0] + m[1][0] * mat.m[1][1] + m[2][0] * mat.m[1][2] + m[3][0] * mat.m[1][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][1] * mat.m[1][0] + m[1][1] * mat.m[1][1] + m[2][1] * mat.m[1][2] + m[3][1] * mat.m[1][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][2] * mat.m[1][0] + m[1][2] * mat.m[1][1] + m[2][2] * mat.m[1][2] + m[3][2] * mat.m[1][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][3] * mat.m[1][0] + m[1][3] * mat.m[1][1] + m[2][3] * mat.m[1][2] + m[3][3] * mat.m[1][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][0] * mat.m[2][0] + m[1][0] * mat.m[2][1] + m[2][0] * mat.m[2][2] + m[3][0] * mat.m[2][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][1] * mat.m[2][0] + m[1][1] * mat.m[2][1] + m[2][1] * mat.m[2][2] + m[3][1] * mat.m[2][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][2] * mat.m[2][0] + m[1][2] * mat.m[2][1] + m[2][2] * mat.m[2][2] + m[3][2] * mat.m[2][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][3] * mat.m[2][0] + m[1][3] * mat.m[2][1] + m[2][3] * mat.m[2][2] + m[3][3] * mat.m[2][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][0] * mat.m[3][0] + m[1][0] * mat.m[3][1] + m[2][0] * mat.m[3][2] + m[3][0] * mat.m[3][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][1] * mat.m[3][0] + m[1][1] * mat.m[3][1] + m[2][1] * mat.m[3][2] + m[3][1] * mat.m[3][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][2] * mat.m[3][0] + m[1][2] * mat.m[3][1] + m[2][2] * mat.m[3][2] + m[3][2] * mat.m[3][3],                                                                                                                                                                                                                                                                                                                     \
                                m[0][3] * mat.m[3][0] + m[1][3] * mat.m[3][1] + m[2][3] * mat.m[3][2] + m[3][3] * mat.m[3][3]);                                                                                                                                                                                                                                                                                                                    \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthVec4##t MthMat4##t::operator*(const MthVec4##t &vec) const                                                                                                                                                                                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return MthVec4##t(m[0][0] * vec.x + m[1][0] * vec.y + m[2][0] * vec.z + m[3][0] * vec.w,                                                                                                                                                                                                                                                                                                                                             \
                                m[0][1] * vec.x + m[1][1] * vec.y + m[2][1] * vec.z + m[3][1] * vec.w,                                                                                                                                                                                                                                                                                                                                             \
                                m[0][2] * vec.x + m[1][2] * vec.y + m[2][2] * vec.z + m[3][2] * vec.w,                                                                                                                                                                                                                                                                                                                                             \
                                m[0][3] * vec.x + m[1][3] * vec.y + m[2][3] * vec.z + m[3][3] * vec.w);                                                                                                                                                                                                                                                                                                                                            \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::operator*=(type factor)                                                                                                                                                                                                                                                                                                                                                                                             \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[0][1] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[0][2] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[0][3] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[1][0] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[1][1] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[1][2] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[1][3] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[2][0] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[2][1] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[2][2] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[2][3] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[3][0] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[3][1] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[3][2] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[3][3] *= factor;                                                                                                                                                                                                                                                                                                                                                                                                                   \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t MthMat4##t::operator*(type factor) const                                                                                                                                                                                                                                                                                                                                                                                         \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return MthMat4##t(m[0][0] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[0][1] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[0][2] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[0][3] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[1][0] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[1][1] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[1][2] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[1][3] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[2][0] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[2][1] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[2][2] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[2][3] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[3][0] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[3][1] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[3][2] * factor,                                                                                                                                                                                                                                                                                                                                                                                                  \
                                m[3][3] * factor);                                                                                                                                                                                                                                                                                                                                                                                                 \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::identity()                                                                                                                                                                                                                                                                                                                                                                                                          \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] = 1;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[0][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[0][2] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[0][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][1] = 1;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][2] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][2] = 1;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][2] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][3] = 1;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::transpose()                                                                                                                                                                                                                                                                                                                                                                                                         \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              type buf10 = m[1][0];                                                                                                                                                                                                                                                                                                                                                                                                                \
              m[1][0] = m[0][1];                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[1][1] = buf10;                                                                                                                                                                                                                                                                                                                                                                                                                     \
              type buf20 = m[2][0];                                                                                                                                                                                                                                                                                                                                                                                                                \
              m[2][0] = m[0][2];                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[0][2] = buf20;                                                                                                                                                                                                                                                                                                                                                                                                                     \
              type buf30 = m[3][0];                                                                                                                                                                                                                                                                                                                                                                                                                \
              m[3][0] = m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[0][3] = buf30;                                                                                                                                                                                                                                                                                                                                                                                                                     \
              type buf21 = m[2][1];                                                                                                                                                                                                                                                                                                                                                                                                                \
              m[2][1] = m[1][2];                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[1][2] = buf21;                                                                                                                                                                                                                                                                                                                                                                                                                     \
              type buf31 = m[3][1];                                                                                                                                                                                                                                                                                                                                                                                                                \
              m[3][1] = m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[1][3] = buf31;                                                                                                                                                                                                                                                                                                                                                                                                                     \
              type buf32 = m[3][2];                                                                                                                                                                                                                                                                                                                                                                                                                \
              m[3][2] = m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[2][3] = buf32;                                                                                                                                                                                                                                                                                                                                                                                                                     \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::scale(type x, type y, type z, type w)                                                                                                                                                                                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] *= x;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[0][1] *= x;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[0][2] *= x;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[0][3] *= x;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[1][0] *= y;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[1][1] *= y;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[1][2] *= y;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[1][3] *= y;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[2][0] *= z;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[2][1] *= z;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[2][2] *= z;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[2][3] *= z;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[3][0] *= w;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[3][1] *= w;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[3][2] *= w;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[3][3] *= w;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::scale(const MthVec4##t &vec)                                                                                                                                                                                                                                                                                                                                                                                        \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return scale(vec.x, vec.y, vec.z, vec.w);                                                                                                                                                                                                                                                                                                                                                                                            \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::scaleDim3(type x, type y, type z)                                                                                                                                                                                                                                                                                                                                                                                   \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] *= x;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[0][1] *= x;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[0][2] *= x;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[0][3] *= x;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[1][0] *= y;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[1][1] *= y;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[1][2] *= y;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[1][3] *= y;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[2][0] *= z;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[2][1] *= z;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[2][2] *= z;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              m[2][3] *= z;                                                                                                                                                                                                                                                                                                                                                                                                                        \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::scaleDim3(const MthVec3##t &vec)                                                                                                                                                                                                                                                                                                                                                                                    \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return scaleDim3(vec.x, vec.y, vec.z);                                                                                                                                                                                                                                                                                                                                                                                               \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::rotXFst(type a)                                                                                                                                                                                                                                                                                                                                                                                                     \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              type c = (type)cosf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type s = (type)sinf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type m10 = m[1][0] * c + m[2][0] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m11 = m[1][1] * c + m[2][1] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m12 = m[1][2] * c + m[2][2] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m13 = m[1][3] * c + m[2][3] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m20 = m[1][0] * -s + m[2][0] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m21 = m[1][1] * -s + m[2][1] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m22 = m[1][2] * -s + m[2][2] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m23 = m[1][3] * -s + m[2][3] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              m[1][0] = m10;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][1] = m11;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][2] = m12;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][3] = m13;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][0] = m20;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][1] = m21;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][2] = m22;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][3] = m23;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::rotXSec(type a)                                                                                                                                                                                                                                                                                                                                                                                                     \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              type c = (type)cosf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type s = (type)sinf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type m01 = m[0][1] * c + m[0][2] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m02 = m[0][1] * s + m[0][2] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m11 = m[1][1] * c + m[1][2] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m12 = m[1][1] * s + m[1][2] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m21 = m[2][1] * c + m[2][2] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m22 = m[2][1] * s + m[2][2] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m31 = m[3][1] * c + m[3][2] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m32 = m[3][1] * s + m[3][2] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              m[0][1] = m01;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][2] = m02;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][1] = m11;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][2] = m12;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][1] = m21;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][2] = m22;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][1] = m31;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][2] = m32;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::rotYFst(type a)                                                                                                                                                                                                                                                                                                                                                                                                     \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              type c = (type)cosf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type s = (type)sinf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type m00 = m[0][0] * c + m[2][0] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m01 = m[0][1] * c + m[2][1] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m02 = m[0][2] * c + m[2][2] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m03 = m[0][3] * c + m[2][3] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m20 = m[0][0] * s + m[2][0] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m21 = m[0][1] * s + m[2][1] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m22 = m[0][2] * s + m[2][2] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m23 = m[0][3] * s + m[2][3] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              m[0][0] = m00;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][1] = m01;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][2] = m02;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][3] = m03;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][0] = m20;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][1] = m21;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][2] = m22;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][3] = m23;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::rotYSec(type a)                                                                                                                                                                                                                                                                                                                                                                                                     \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              type c = (type)cosf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type s = (type)sinf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type m00 = m[0][0] * c + m[0][2] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m02 = m[0][0] * -s + m[0][2] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m10 = m[1][0] * c + m[1][2] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m12 = m[1][0] * -s + m[1][2] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m20 = m[2][0] * c + m[2][2] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m22 = m[2][0] * -s + m[2][2] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m30 = m[3][0] * c + m[3][2] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m32 = m[3][0] * -s + m[3][2] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              m[0][0] = m00;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][2] = m02;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][0] = m10;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][2] = m12;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][0] = m20;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][2] = m22;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][0] = m30;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][2] = m32;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::rotZFst(type a)                                                                                                                                                                                                                                                                                                                                                                                                     \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              type c = (type)cosf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type s = (type)sinf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type m00 = m[0][0] * c + m[1][0] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m01 = m[0][1] * c + m[1][1] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m02 = m[0][2] * c + m[1][2] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m03 = m[0][3] * c + m[1][3] * s;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m10 = m[0][0] * -s + m[1][0] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m11 = m[0][1] * -s + m[1][1] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m12 = m[0][2] * -s + m[1][2] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m13 = m[0][3] * -s + m[1][3] * c;                                                                                                                                                                                                                                                                                                                                                                                               \
              m[0][0] = m00;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][1] = m01;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][2] = m02;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][3] = m03;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][0] = m10;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][1] = m11;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][2] = m12;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][3] = m13;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::rotZSec(type a)                                                                                                                                                                                                                                                                                                                                                                                                     \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              type c = (type)cosf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type s = (type)sinf(a);                                                                                                                                                                                                                                                                                                                                                                                                              \
              type m00 = m[0][0] * c + m[0][1] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m01 = m[0][0] * s + m[0][1] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m10 = m[1][0] * c + m[1][1] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m11 = m[1][0] * s + m[1][1] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m20 = m[2][0] * c + m[2][1] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m21 = m[2][0] * s + m[2][1] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              type m30 = m[3][0] * c + m[3][1] * -s;                                                                                                                                                                                                                                                                                                                                                                                               \
              type m31 = m[3][0] * s + m[3][1] * c;                                                                                                                                                                                                                                                                                                                                                                                                \
              m[0][0] = m00;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[0][1] = m01;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][0] = m10;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[1][1] = m11;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][0] = m20;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[2][1] = m21;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][0] = m30;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              m[3][1] = m31;                                                                                                                                                                                                                                                                                                                                                                                                                       \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::translateFst(type x, type y, type z, type w)                                                                                                                                                                                                                                                                                                                                                                        \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[3][0] = m[0][0] * x + m[1][0] * y + m[2][0] * z + m[3][0] * w;                                                                                                                                                                                                                                                                                                                                                                     \
              m[3][1] = m[0][1] * x + m[1][1] * y + m[2][1] * z + m[3][1] * w;                                                                                                                                                                                                                                                                                                                                                                     \
              m[3][2] = m[0][2] * x + m[1][2] * y + m[2][2] * z + m[3][2] * w;                                                                                                                                                                                                                                                                                                                                                                     \
              m[3][3] = m[0][3] * x + m[1][3] * y + m[2][3] * z + m[3][3] * w;                                                                                                                                                                                                                                                                                                                                                                     \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::translateFst(const MthVec4##t &vec)                                                                                                                                                                                                                                                                                                                                                                                 \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return translateFst(vec.x, vec.y, vec.z, vec.w);                                                                                                                                                                                                                                                                                                                                                                                     \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::translateSec(type x, type y, type z, type w)                                                                                                                                                                                                                                                                                                                                                                        \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] = m[0][0] + x * m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[0][1] = m[0][1] + y * m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[0][2] = m[0][2] + z * m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[0][3] = w * m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[1][0] = m[1][0] + x * m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[1][1] = m[1][1] + y * m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[1][2] = m[1][2] + z * m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[1][3] = w * m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[2][0] = m[2][0] + x * m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[2][1] = m[2][1] + y * m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[2][2] = m[2][2] + z * m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[2][3] = w * m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                               \
              m[3][0] = m[3][0] + x * m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[3][1] = m[3][1] + y * m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[3][2] = m[3][2] + z * m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[3][3] = w * m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                               \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::translateSec(const MthVec4##t &vec)                                                                                                                                                                                                                                                                                                                                                                                 \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return translateSec(vec.x, vec.y, vec.z, vec.w);                                                                                                                                                                                                                                                                                                                                                                                     \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::translateFstDim3(type x, type y, type z)                                                                                                                                                                                                                                                                                                                                                                            \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[3][0] = m[0][0] * x + m[1][0] * y + m[2][0] * z + m[3][0];                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][1] = m[0][1] * x + m[1][1] * y + m[2][1] * z + m[3][1];                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][2] = m[0][2] * x + m[1][2] * y + m[2][2] * z + m[3][2];                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][3] = m[0][3] * x + m[1][3] * y + m[2][3] * z + m[3][3];                                                                                                                                                                                                                                                                                                                                                                         \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::translateFstDim3(const MthVec3##t &vec)                                                                                                                                                                                                                                                                                                                                                                             \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return translateFstDim3(vec.x, vec.y, vec.z);                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::translateSecDim3(type x, type y, type z)                                                                                                                                                                                                                                                                                                                                                                            \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] = m[0][0] + x * m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[0][1] = m[0][1] + y * m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[0][2] = m[0][2] + z * m[0][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[1][0] = m[1][0] + x * m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[1][1] = m[1][1] + y * m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[1][2] = m[1][2] + z * m[1][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[2][0] = m[2][0] + x * m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[2][1] = m[2][1] + y * m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[2][2] = m[2][2] + z * m[2][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[3][0] = m[3][0] + x * m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[3][1] = m[3][1] + y * m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              m[3][2] = m[3][2] + z * m[3][3];                                                                                                                                                                                                                                                                                                                                                                                                     \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::translateSecDim3(const MthVec3##t &vec)                                                                                                                                                                                                                                                                                                                                                                             \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              return translateSecDim3(vec.x, vec.y, vec.z);                                                                                                                                                                                                                                                                                                                                                                                        \
       }                                                                                                                                                                                                                                                                                                                                                                                                                                           \
       MthMat4##t &MthMat4##t::perspective(type width, type height, type fov, type znear, type zfar)                                                                                                                                                                                                                                                                                                                                               \
       {                                                                                                                                                                                                                                                                                                                                                                                                                                           \
              type aspect = width / height;                                                                                                                                                                                                                                                                                                                                                                                                        \
              type tan_half_fov = (type)tanf(fov / 2.0f);                                                                                                                                                                                                                                                                                                                                                                                          \
              type range = znear - zfar;                                                                                                                                                                                                                                                                                                                                                                                                           \
              m[0][0] = 1 / (aspect * tan_half_fov);                                                                                                                                                                                                                                                                                                                                                                                               \
              m[0][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[0][2] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[0][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][1] = 1 / tan_half_fov;                                                                                                                                                                                                                                                                                                                                                                                                          \
              m[1][2] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[1][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[2][2] = (-znear - zfar) / range;                                                                                                                                                                                                                                                                                                                                                                                                   \
              m[2][3] = 1;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][0] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][1] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              m[3][2] = ((type)2 * zfar * znear) / range;                                                                                                                                                                                                                                                                                                                                                                                          \
              m[3][3] = 0;                                                                                                                                                                                                                                                                                                                                                                                                                         \
              return *this;                                                                                                                                                                                                                                                                                                                                                                                                                        \
       }

MTH_DEF_MAT2(float, f)
MTH_DEF_MAT2(double, d)
MTH_DEF_MAT2(int, i)

MTH_DEF_MAT3(float, f)
MTH_DEF_MAT3(double, d)
MTH_DEF_MAT3(int, i)

MTH_DEF_MAT4(float, f)
MTH_DEF_MAT4(double, d)
MTH_DEF_MAT4(int, i)